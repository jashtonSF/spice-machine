<!DOCTYPE HTML>
<!---------------------------------------->
<!-- This file created by Justin Ashton -->
<!-- (c) J. Ashton & Company, Inc., 2016-->
<!---------------------------------------->

<html>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<body>
<center>
    <h2>Spice Machine Prototype Control v1.0</h2>
    <h3>Enter number of motor steps: 1-6400</h3><br>
    <input type="number" name="degBox" id="numSteps" min="1" max="6400" value="1600" onchange="setValue(this);"/>
    <br><br>
    <p>1/8 Revolution: 200 Steps
    <p>1/4 Revolution: 400 Steps
    <p>1/2 Revolution: 800 Steps
    <p>1 Revolution: 1600 Steps
	<br><br>
	<h3> Change motor speed: 100 (fast)-1000 (slow)</h3><br>
	<input type="number" name="delayBox" id="uSecs" min="100" max="1000" value="1000" onchange="setValue(this)"/><br><br>
	<button style="background:green; font-weight: bold; color: white;" onclick="photonSteps(newSteps);">Dispense</button>
	
    <script type="text/javascript">
      var deviceID    = "";  //enter your photon ID in the quotes
      var accessToken = "";  //enter your photon token in the quotes
      var postRevs = "numsteps";
      var postDelay = "uSecsDelay";
      

      function setValue(obj) {
        newSteps = document.getElementById('numSteps').value;
        if(obj.id == "uSecs") {
        	var newDelay = document.getElementById('uSecs').value;
        	photonDelay(newDelay);
        } 
    	}
      
      function photonSteps(newSteps){
        var requestURL = "https://api.particle.io/v1/devices/" + deviceID + "/" + postRevs + "/";
        $.post( requestURL, { params: newSteps, access_token: accessToken });
      }
      
      function photonDelay(newDelay){
        var requestURL = "https://api.particle.io/v1/devices/" + deviceID + "/" + postDelay + "/";
        $.post( requestURL, { params: newDelay, access_token: accessToken });
      }
     
  

    </script>
  </center>
</body>
</html>